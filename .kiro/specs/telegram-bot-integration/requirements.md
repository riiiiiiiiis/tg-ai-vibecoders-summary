# Requirements Document

## Introduction

Добавление функциональности отправки AI-сгенерированных саммари в Telegram чат через бота по кнопке из веб-интерфейса. Пользователь сможет одним кликом отправить готовое саммари прямо в чат, для которого оно было создано.

## Requirements

### Requirement 1

**User Story:** Как администратор чата, я хочу отправить сгенерированное AI-саммари прямо в Telegram чат одним кликом, чтобы участники чата могли сразу увидеть аналитику и инсайты.

#### Acceptance Criteria

1. WHEN пользователь нажимает кнопку "Отправить в чат" THEN система SHALL отправить текущее саммари в соответствующий Telegram чат через бота
2. WHEN саммари успешно отправлено THEN система SHALL показать уведомление об успешной отправке
3. WHEN отправка не удалась THEN система SHALL показать сообщение об ошибке с описанием проблемы
4. IF саммари не сгенерировано THEN кнопка "Отправить в чат" SHALL быть неактивной

### Requirement 2

**User Story:** Как разработчик, я хочу настроить Telegram бота через переменные окружения, чтобы система могла безопасно подключаться к Telegram API.

#### Acceptance Criteria

1. WHEN система запускается THEN она SHALL проверить наличие TELEGRAM_BOT_TOKEN и TELEGRAM_CHAT_ID в переменных окружения
2. IF TELEGRAM_BOT_TOKEN или TELEGRAM_CHAT_ID отсутствует THEN функция отправки SHALL быть недоступна
3. WHEN бот отправляет сообщение THEN он SHALL использовать токен и chat_id из переменных окружения для аутентификации
4. IF TELEGRAM_THREAD_ID установлен THEN бот SHALL отправлять сообщения в указанный тред форума

### Requirement 3

**User Story:** Как пользователь интерфейса, я хочу видеть статус отправки сообщения, чтобы понимать, что происходит с моим запросом.

#### Acceptance Criteria

1. WHEN пользователь нажимает "Отправить в чат" THEN кнопка SHALL показать состояние загрузки
2. WHEN отправка в процессе THEN кнопка SHALL быть заблокирована для повторных нажатий
3. WHEN отправка завершена THEN кнопка SHALL вернуться в исходное состояние
4. WHEN произошла ошибка THEN система SHALL показать детали ошибки пользователю

### Requirement 4

**User Story:** Как администратор чата, я хочу чтобы бот отправлял саммари в правильный чат, чтобы сообщения попадали именно туда, где нужна аналитика.

#### Acceptance Criteria

1. WHEN пользователь просматривает саммари для конкретного chat_id THEN система SHALL отправить сообщение именно в этот чат
2. IF chat_id не определен THEN система SHALL показать ошибку о невозможности определить целевой чат
3. WHEN бот не добавлен в чат THEN система SHALL показать соответствующее сообщение об ошибке

### Requirement 5

**User Story:** Как участник Telegram чата, я хочу получать красиво отформатированные саммари от бота, чтобы информация была легко читаемой.

#### Acceptance Criteria

1. WHEN бот отправляет саммари THEN сообщение SHALL быть отформатировано с использованием Telegram Markdown
2. WHEN саммари содержит разделы THEN каждый раздел SHALL быть четко выделен заголовками
3. WHEN саммари содержит списки THEN они SHALL быть отформатированы как маркированные списки
4. WHEN сообщение слишком длинное THEN система SHALL разбить его на несколько сообщений