# Requirements Document

## Introduction

После обновления Telegram группы до форума, необходимо добавить функциональность отображения списка тредов (тем форума) на странице дашборда. Это позволит пользователям видеть структуру форума и навигировать по темам, в которых участвует бот.

## Requirements

### Requirement 1

**User Story:** Как владелец Telegram форума, я хочу видеть список всех тредов (тем) в моем форуме на дашборде, чтобы понимать структуру обсуждений и активность по темам.

#### Acceptance Criteria

1. WHEN пользователь открывает дашборд с подключенным форумом THEN система SHALL отобразить список тредов сверху страницы
2. WHEN бот подключен к обычной группе (не форуму) THEN система SHALL не отображать секцию с тредами
3. WHEN список тредов загружается THEN система SHALL показать индикатор загрузки
4. IF загрузка тредов завершилась ошибкой THEN система SHALL отобразить сообщение об ошибке на русском языке

### Requirement 2

**User Story:** Как пользователь дашборда, я хочу видеть основную информацию о каждом треде, чтобы быстро оценить активность и содержание темы.

#### Acceptance Criteria

1. WHEN треды отображаются THEN каждый тред SHALL содержать название темы
2. WHEN треды отображаются THEN каждый тред SHALL показывать количество сообщений в теме
3. WHEN треды отображаются THEN каждый тред SHALL показывать дату последнего сообщения
4. WHEN треды отображаются THEN система SHALL использовать русский язык для всех меток и текста

### Requirement 3

**User Story:** Как пользователь дашборда, я хочу фильтровать данные по конкретному треду, чтобы видеть аналитику и AI инсайты только для выбранной темы.

#### Acceptance Criteria

1. WHEN пользователь кликает на тред THEN система SHALL применить фильтр по message_thread_id
2. WHEN фильтр по треду активен THEN все метрики дашборда SHALL отображать данные только для этого треда
3. WHEN фильтр по треду активен THEN AI отчеты SHALL генерироваться только на основе сообщений из этого треда
4. WHEN пользователь хочет сбросить фильтр THEN система SHALL предоставить кнопку "Все темы" или аналогичную
5. WHEN фильтр применен THEN URL SHALL содержать параметр thread_id для возможности шаринга ссылки

### Requirement 4

**User Story:** Как разработчик, я хочу чтобы система корректно работала с существующей схемой базы данных, чтобы не требовалось изменение структуры таблиц.

#### Acceptance Criteria

1. WHEN система запрашивает треды THEN запрос SHALL использовать существующую таблицу messages
2. WHEN система определяет треды THEN она SHALL группировать по полю message_thread_id
3. IF поле message_thread_id отсутствует в таблице messages THEN система SHALL корректно обработать ошибку
4. WHEN система работает с обычной группой THEN message_thread_id SHALL быть NULL и треды не отображаются

### Requirement 5

**User Story:** Как пользователь дашборда, я хочу видеть визуальное выделение активного треда, чтобы понимать какой фильтр сейчас применен.

#### Acceptance Criteria

1. WHEN тред выбран THEN он SHALL быть визуально выделен (например, другим цветом фона)
2. WHEN фильтр не применен THEN кнопка "Все темы" SHALL быть визуально выделена
3. WHEN пользователь наводит курсор на тред THEN система SHALL показать hover эффект
4. WHEN список тредов длинный THEN система SHALL обеспечить читаемость через скролл или пагинацию
